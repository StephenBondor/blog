<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-tsx-1fb4e04193a2f48d39aa.js" as="script"/><link rel="preload" href="/component---src-templates-post-tsx-8f334c35fa5d05ad2c3f.js" as="script"/><link rel="preload" href="/path---the-timezone-struggle-b2ffdb245913314e347e.js" as="script"/><link rel="preload" href="/app-fc44ae6f09f614b02770.js" as="script"/><link rel="preload" href="/commons-967e5303418f76a8ed8e.js" as="script"/><style data-styled-components="bfmQFt kBuPNo eBsTPP eLxNgv iLMYHz bDBUOc gZalyC hIYXBw huQHpW VsnUC jvLTaI hGHaPP gTETVK cfkTsn kfYMzc eTkrat ideBFY kasrTC eSSqcR">
/* sc-component-id: sc-bdVaJa */
.kBuPNo{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:100%;}
/* sc-component-id: sc-bwzfXH */
.eBsTPP{-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;box-sizing:border-box;max-width:1200px;height:64px;padding:8px 16px;} @media only screen and (min-width:1232px){.eBsTPP{padding:8px 0;}}
/* sc-component-id: sc-htpNat */
.eLxNgv{-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;list-style:none;}
/* sc-component-id: sc-ifAKCX */
.kasrTC{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:100vw;margin-top:16px;padding:16px;} @media only screen and (min-width:800px){.kasrTC{margin-top:32px;}} @media only screen and (min-width:1200px){.kasrTC{margin-top:64px;padding:16px 0;}}
/* sc-component-id: sc-EHOje */
.eSSqcR{-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;} @media only screen and (min-width:800px){.eSSqcR{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;max-width:1200px;}}
/* sc-component-id: sc-global-2044037823 */
html{height:100%;font-size:10px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen, Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;} body{min-height:100%;} *{margin:0;padding:0;box-sizing:border-box;} a{-webkit-text-decoration:none;text-decoration:none;color:inherit;}
/* sc-component-id: sc-dnqmqq */
.bfmQFt{display:grid;min-height:100vh;grid-template-rows:auto 1fr auto;}
/* sc-component-id: sc-iwsKbI */
.hGHaPP{width:100%;max-width:700px;}
/* sc-component-id: sc-gZMcBi */
.cfkTsn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;width:100%;padding:0 16px;}
/* sc-component-id: sc-gqjmRU */
.gTETVK{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;font-size:32px;margin:32px 0 48px;line-height:0px;-webkit-letter-spacing:12px;-moz-letter-spacing:12px;-ms-letter-spacing:12px;letter-spacing:12px;}
/* sc-component-id: sc-VigVT */
.kfYMzc{font-size:1.6em;}
/* sc-component-id: sc-jTzLTM */
.eTkrat{margin-left:16px;}
/* sc-component-id: sc-fjdhpX */
.ideBFY{width:32px;height:32px;}
/* sc-component-id: sc-jzJRlG */
.iLMYHz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-width:0;}
/* sc-component-id: sc-cSHVUG */
.bDBUOc{width:100%;background-color:#f05f40;-webkit-clip-path:polygon(0 32px,100% 0,100% calc(100% - 32px),0 100%);clip-path:polygon(0 32px,100% 0,100% calc(100% - 32px),0 100%);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:64px 0 56px;margin-bottom:32px;}
/* sc-component-id: sc-kAzzGY */
.gZalyC{max-width:700px;width:100%;padding:0 16px;}
/* sc-component-id: sc-chPdSV */
.hIYXBw{color:white;font-size:2.8em;font-weight:bold;margin-bottom:8px;} @media only screen and (min-width:1200px){.hIYXBw{font-size:3.2em;}}
/* sc-component-id: sc-kgoBCf */
.huQHpW{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:white;font-size:1.6em;}
/* sc-component-id: sc-kGXeez */
.VsnUC{margin:0 12px;}
/* sc-component-id: sc-kpOJdX */
.jvLTaI{max-width:700px;font-size:1.6em;line-height:1.8em;color:#333333;padding:0 16px;width:100%;} .jvLTaI > *:not(:first-child){margin-top:32px;} .jvLTaI h2 + *,.jvLTaI h3 + *,.jvLTaI h4 + *,.jvLTaI h5 + *,.jvLTaI h6 + *{margin-top:16px !important;} .jvLTaI ul,.jvLTaI ol{margin-left:1.1em;} .jvLTaI p a{color:#f05f40;-webkit-text-decoration:underline;text-decoration:underline;} .jvLTaI img{width:100%;border-radius:4px;} .jvLTaI img + em,.jvLTaI .gatsby-resp-image-wrapper + em{display:block;width:100%;font-size:1.4rem;font-style:normal;line-height:2rem;text-align:center;margin-top:8px;} .jvLTaI pre{overflow:scroll;padding:12px;font-size:1.4rem;border-radius:4px;} .jvLTaI pre code{padding:0;} .jvLTaI code{background-color:#f8f8f8;padding:4px 8px;font-size:14px;} .jvLTaI blockquote{border-left:8px solid #f05f40;color:#757575;font-style:italic;} .jvLTaI blockquote p{background-color:white;padding-left:8px;} .jvLTaI blockquote p:not(:first-child){margin-top:16px;} .jvLTaI iframe{border:none;}</style><title data-react-helmet="true">The Timezone Struggle | Pav Sidhu</title><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABNUlEQVR4AY3RAUQDURzH8QBD2YAGJiTBuEoZjEeTC3FQZOIFRdBoMFQPAjBiCDoQYTVBauIIZNIBgByggKmEVuu3vz9jzntv+/PFcf/P3bsb04xHRRRihZSkrCMoDKlqA4IRgMgGgEJyPIG99UVUtvNcfi4TR1LG189OT+Ltvoy/1hHwrNBtHaPzdIj3ZhnF1WwfEEagWdviRV2vN/tWwMmkk3i52EVwJjkNYjsCD6SUUEpBCAFnJo3SZg5iaZavvZUcUhMJPUC6IzdcDI635jLSn+4/sFwotOn2KR0gqgcu6tcNfP8Cl/UG1I6ArzzcPQT4+AG+OoAzv+Dzgg6g+Oyxb8DIVa2E8xOJ29Oi4gUDElKw9flYETbAGQKEsRUtElkANQrgmZ5Oaf6/HpFUe2DZNy33AN6FZ6PoR6NLAAAAAElFTkSuQmCC"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACe0lEQVR4AcWVAYQUURzGA4S4Cdwpzkid4DIJFm0GSXF3N4hilSlKIiYH3WZvByTEERAYQUdiECdg6Krubo+BgGgQITJ029Xe7e7X+96SqdutnfeGHj87N/Pufb//e+/N7MnRPEEiwD+IBJagsGYIYgFyElK68HAFIh2BRQEKwFYJNwUoCP9/Vq+6DIPXfnxsBOXj44TXwwikKgLIMrJvL+avlPHu6U18fTm/i+WHFdy/dRpT5YlBEmaecDv7z5OHR2Vwc6WK1moNnfU6sOFLOo062usLaL2tYev1XWyuzOPj8m1Uzk1qbUQ/UznDGczAodhZW0DzVZWzoS/Aad/uhedm7fE1fYFPL+aUwgmXSlXAE3AKub7KAuTYkVGlTWgKUL1aRhrdQeA78K/bRF7HT24MLWCfMHsCCk3amweMvsfKmhijHEPk7+LcWbjTFgMljn2U93lP+UUE0zSRJAmyLY5jBEEAy7IoIcP4y76e58H3/V84jgPDkAWkuZZAVGUdOrg/5SCDGsXYlVBmUIuiiH2IlUfAjx65+JtAGIacZrkfbNvGn63bBdqC9x+kaMBxcwkIYJdLvw3W6gA/2sB3wfSsg+S5B/ZznRI+f0mxtdN71tzu8U38vfQspICjJMBdX635eNOI5WCbYtDVjRhTM/JUyHASPriIS5ddPt9F5cIsOKaSAOFSMCxD32NIiZkzJVSECKXJqZMlLN07ryRgCVAA/FIqfYopkWiG80tJgUBVwBLEGgJ8jVNAnn9VCVdHoNuoy+p1BAwBNHA5jq5EqCFgFCHgKIb72uEZiShneKxe/eATkQ4ZngostSR9iUip8hwSpiDoIxKq7vif3oaK7hn1goYAAAAASUVORK5CYII="/><link data-react-helmet="true" rel="icon" type="image/png" sizes="48x48" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADvElEQVR4AdWYAWRVXxzH/4A/yi6iCdtrsoa2biUFb11AsdalUhm5JcmIm4rebNuFIsolqJRdYBEMMU3LpbVqW7lQIDyESenSttbetvfrfG+7t73rvdd73u+e6fDp3ds7O7/v93fO+Z173381NkVgClwBreKt3mdxX4ZhgSpYt6YLfAHVgC8wgkRIbghKzHgCU774JIwk2DQBScBKQrwSbkwJZJMwYAlIHvwVKivZgMFdMokP+fvAXgcDLqcBt1ywug3/U9ehVrqb6aCRO130aeQSfX+RCT5xP3T9KGXOpKkj3Yy+lR9yXK2McAgLBVfM+8fdMAtD/Bu50trfum0zTQyeDQTNjmdo4VUv5d700crUANFbKyI/bdHyVH/w3U/RZ+5lT9xMOSM6hwGzWObDrC++7oNIiK2Kpcl+GIJ5jIMZSWwjO7FBsa4ROMx2zSyK2cF46V0N/AbiGxhBOMWHYLxHN44lbgDZR8YQlJ3Pz67GDWisBhrq62huvCcR8WBleiBeZjXWPdB9fC/lYtnnpn13I3sZDR8jcCDFKg4/F0/siwywH2Qzo1eCIO59g8xT+0nbk4qwzms0fOskZZ+YtRjAOIm82BDoPddOutaC67KktijkDV0oKhDm7csH1yYA16FxfBeO47AbAIZhkGWJQLYNcA2C/9c0LeqnNteT716LhGN2lI2ln4PwHbIPcM/9fuwLAqF/a77vo19RkTAI067rgrB/dI+/S6VSvJtYZE/Z3rjJwyWCVNp0XS8Qb5omVdjWmtA4DNiY/moNYElhGTmWjuURZLfCBrNsmxgGXAEZh1UYqCqL2LD4W5goNwN5wbL4Z2mFaFHQeUSHAZXTAESUzGI+/1tAblXA6HMX1SrawKgwqqoWiFxYJvqxRDQvwCfuw8+tTU0+YrMagAhk9cs3PxIwHxMAZr761Cj6xc8DlMunY27Yt8DAbO4PHz5meUtoaCCchbadKj0YdGjynVcgAIFv3rapTlHQD/0LwLnQtqOFJqY99C9JR6eOB0aL04ATiih2CsdP43jm4yZwyHWdNgKzI2NuxL2HDqUPaHjewgsOqwFTQIzACGYJhgtAcvCuwW1AFZAkIB5oiM1pIitBPF7+Id5HTG4DugwDeNeILx/WpZTwTOAXDl8YUBAvKRN2ggbwU4vJq1j+UlIRJ2kTfkLiy25e/oONH4dXqfxzISXFQOz5iAsb48o0oDGKzwqYSqf8kurHK49MA4rA+yfFM5jwWMUzmHCqyLrFKoC5vDolnpdcgZnEZv0FABxlSx3o2B8AAAAASUVORK5CYII="/><meta data-react-helmet="true" name="theme-color" content="#f05f40"/><meta data-react-helmet="true" name="description" content="Something I recently found difficult to get my head around was how timezones work. It’s one of those things you tend to avoid as much as possible, however, I realised that there was quite a big flaw in my website, Revisify, that needed addressing. For those of you who don’t know, Revisify is a tool I built to help…"/><style id="gatsby-inlined-css">pre{color:#1b1b1b;background-color:#f8f8f8}.token.cdata,.token.doctype,.token.prolog{color:#3ea7bb}.token.block-comment,.token.comment,.token.punctuation{color:#5f6364}.token.atrule,.token.attr-value,.token.boolean,.token.constant,.token.deleted,.token.function-name,.token.keyword,.token.number,.token.property,.token.symbol,.token.tag{color:#f05f40}.token.attr-name,.token.builtin,.token.char,.token.class-name,.token.function,.token.inserted,.token.selector,.token.string{color:#3ea7bb}.token.entity,.token.important,.token.operator,.token.regex,.token.url,.token.variable{color:#9756e1}.language-css .token.string,.style .token.string{color:#3ea7bb}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.namespace{opacity:.7}.token.cr:before,.token.lf:before,.token.tab:not(:empty):before{color:#e0d7d1}</style></head><body><div id="___gatsby"><div class="sc-dnqmqq bfmQFt" data-reactroot="" data-reactid="1" data-react-checksum="-823042016"><!-- react-empty: 2 --><header class="sc-bdVaJa kBuPNo" data-reactid="3"><div class="sc-bwzfXH eBsTPP" data-reactid="4"><a style="height:14px;" href="/" data-reactid="5">Home</a><ul class="sc-htpNat eLxNgv" data-reactid="6"></ul></div></header><div class="sc-jzJRlG iLMYHz" data-reactid="7"><!-- react-empty: 8 --><header class="sc-cSHVUG bDBUOc" data-reactid="9"><div class="sc-kAzzGY gZalyC" data-reactid="10"><h1 class="sc-chPdSV hIYXBw" data-reactid="11">The Timezone Struggle</h1><div class="sc-kgoBCf huQHpW" data-reactid="12"><div data-reactid="13">27th December 2016</div><div class="sc-kGXeez VsnUC" data-reactid="14">•</div><div data-reactid="15">4 min read</div></div></div></header><article class="sc-kpOJdX jvLTaI" data-reactid="16"><p>Something I recently found difficult to get my head around was how timezones work. It’s one of those things you tend to avoid as much as possible, however, I realised that there was quite a big flaw in my website, Revisify, that needed addressing.</p>
<p>For those of you who don’t know, Revisify is a tool I built to help students study. Students can create questions, test themselves and progress. I have one feature available, study streaks, which count the number consecutive days a student has been studying.</p>
<p>
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 700px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 57.45614035087719%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABT0lEQVQoz4WS3UoCQRTHfYuSUtzV8WOdmd352q/MVhQxk5LIJNKKgiJauqmg296it+gNuusNuu8Zgu63Yx/i2pLwhzmHOb8558+ZFGJOwbJnpRORN1WeStAk/gpAc2VF7qbgmF6DkKn4erMsXEOtlYUHcdWuVaQP0omMVTInBkOfInN6w9He+PT4Itzo7vT2Rwdnl6PzsDcc56qs8DtRAjyZjcoctZdNb5X5iNmQIssucRfFyxJgKM0QJSz2UCuFnqERocNbVQaaNZ8AA6lRhSl7HZDothldeY9NY8kQKmizekvD/D8YUZnG6tAh0VHl4343uum89XWEmd3aqm32F8DfMweCvQ8L0V07uvaeuyhLlek3qBfMkQmeofkKlie+9TIQT9uWz3kGC15vyUZngedp/zSWaYOD2yxRkOpU/G37AyfswJSwT/gtKImZhT8BL+OH+bldzJgAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Here’s what the study streak looks like."
        title=""
        src="/static/study-streak-e3cf398f9c16ca848a7552a83703032c-e3b29.png"
        srcset="/static/study-streak-e3cf398f9c16ca848a7552a83703032c-6572b.png 175w,
/static/study-streak-e3cf398f9c16ca848a7552a83703032c-e1ddf.png 350w,
/static/study-streak-e3cf398f9c16ca848a7552a83703032c-e3b29.png 700w,
/static/study-streak-e3cf398f9c16ca848a7552a83703032c-1eceb.png 1050w,
/static/study-streak-e3cf398f9c16ca848a7552a83703032c-5aa17.png 1140w"
        sizes="(max-width: 700px) 100vw, 700px"
      />
    </span>
  </span>
  <em>Here’s what the study streak looks like.</em></p>
<p>Now, this must be quite simple to program right? I’ve stored all the dates/times a student has tested themselves in a database, now all I need to do is get today’s date, and work backwards through the database, check if yesterday’s date is there and if so, check the previous day’s date and continue on until one of the dates is not available. However, something which I forgot about was that this would not work for students who live in a timezone other than GMT. Why? Because the server is based in the UK. The way I programmed the server is that every time a student tests themselves, the server will get the server’s date/time and logs it into the database.</p>
<h2>Coordinated Universal Time</h2>
<p>I found out that there is something called *Coordinated Universal Time (UTC) *time. Don’t ask me why it isn’t shortened down to UTC instead of CUT, <a href="https://www.timeanddate.com/time/utc-abbreviation.html">you can read why here.</a> UTC is basically a global standard for timezones and it has the exact same time as GMT.</p>
<ul>
<li>
<p>The time in the UK as represented in UTC would simply be UTC+00:00, because as I said, UTC time is the same as GMT.</p>
</li>
<li>
<p>If we wanted the time in Australia, it would be represented as UTC+09:30 as it is 9 hours and 30 minutes ahead of the time in the UK.</p>
</li>
<li>
<p>The time in Hawaii would be UTC-10:00 as it is 10 hours behind of the time in the UK.</p>
</li>
</ul>
<h2>Dealing with UTC Server</h2>
<p>Okay so back to Revisify. By knowing this, if we stored the date/time in UTC+00:00, we could then convert that to the local time of the student is located. Luckily since I only have 1 server which happens to be based in the UK, the dates in the database are already in UTC+00:00. However, I still needed to change some Python code on the server:</p>
<div class="gatsby-highlight">
      <pre class="language-python"><code class="language-python"><span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime

<span class="token comment"># This gets the server time. If I moved the server to say Australia, it would not get UTC time.</span>
date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># This gets UTC time regardless of where the server is located.</span>
date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>utcnow<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
      </div>
<h2>Dealing with UTC Client Side</h2>
<p>Now that I ‘officially’ store UTC dates/times in the database, I need to convert these correctly to the student’s local time. This can be difficult to program yourself but luckily there’s a fantastic Javascript Library called <a href="http://momentjs.com/">Moment.js</a> which takes out **a lot **of the strain of converting timezones. Here’s how easy it was for me to convert the UTC date/times that I got from the database into the local time of the student’s computer:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">// Server's UTC datetime</span>
<span class="token keyword">var</span> utcDate <span class="token operator">=</span> <span class="token string">'2016-12-20 14:56:51'</span>

<span class="token comment">// Client's local datetime</span>
<span class="token keyword">var</span> localDate <span class="token operator">=</span> moment<span class="token punctuation">.</span><span class="token function">utc</span><span class="token punctuation">(</span>utcDate<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">local</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
      </div>
<p>That simple line of code is all that is needed for the client to get the right date. This library has a lot more functions but I will leave that for another time.</p>
<p>Back to the study streak, I updated the code so that the server sends the dates and some Javascript on the client side calculates the study streak. The final result is <a href="https://gist.github.com/PavSidhu/8a3b04bc7f16ba6a2eb38f6803254fda">available here</a> with some annotations as to how it works. You can also see it below:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">// Values for dates are received from the server</span>
dates <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> dates<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> date <span class="token operator">=</span> date<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> localDate <span class="token operator">=</span> moment<span class="token punctuation">.</span><span class="token function">utc</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">local</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'DDMMYY'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> today <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'DDMMYY'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> yesterday <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'DDMMYY'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>localDate <span class="token operator">===</span> today<span class="token punctuation">)</span> <span class="token operator">||</span>
        localDate <span class="token operator">===</span> yesterday<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        streak <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> previousDate <span class="token operator">=</span> moment<span class="token punctuation">.</span><span class="token function">utc</span><span class="token punctuation">(</span>dates<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">local</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'DDMMYY'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> previousDateYesterday <span class="token operator">=</span> moment<span class="token punctuation">.</span><span class="token function">utc</span><span class="token punctuation">(</span>dates<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">local</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'days'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'DDMMYY'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>localDate <span class="token operator">!==</span> previousDate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>localDate <span class="token operator">===</span> previousDateYesterday<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        streak <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>There we have it. I have found that now I’ve used timezones once, it isn’t as difficult, but still somewhat confusing if I think about it in too much detail.</p>
<p>If you really want to melt your brain, this YouTube video by Tom Scott explains timezones in much more detail, enjoy (or not).</p>
<p><div>
          <div
            class="gatsby-resp-iframe-wrapper"
            style="padding-bottom: 50%; position: relative; height: 0; overflow: hidden;"
          >
            <div><iframe src="https://www.youtube.com/embed/-5wpm-gesOY" style="
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
          "></iframe></div>
          </div>
          </div></p></article><div class="sc-iwsKbI hGHaPP" data-reactid="17"><div class="sc-gqjmRU gTETVK" data-reactid="18">...</div><div class="sc-gZMcBi cfkTsn" data-reactid="19"><p class="sc-VigVT kfYMzc" data-reactid="20">If you liked this post, help me spread the word:</p><a class="sc-jTzLTM eTkrat" href="https://www.facebook.com/dialog/share?app_id=961873467305779&amp;href=https://blog.pavsidhu.com/the-timezone-struggle" target="_blank" rel="noreferrer noopener" data-reactid="21"><img class="sc-fjdhpX ideBFY" src="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjNDI2N0IyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KPHBhdGggZD0iTTk0LjUsMGgtODlDMi41LDAsMCwyLjUsMCw1LjV2ODljMCwzLDIuNSw1LjUsNS41LDUuNWMwLDAsMCwwLDAsMGg0Ny45VjYxLjNoLTEzVjQ2LjJoMTNWMzUuMWMwLTEyLjksNy45LTE5LjksMTkuNC0xOS45YzMuOSwwLDcuOCwwLjIsMTEuNiwwLjZ2MTMuNWgtNy45Yy02LjMsMC03LjUsMy03LjUsNy4zdjkuNmgxNWwtMS45LDE1LjFINjlWMTAwaDI1LjVjMywwLDUuNS0yLjUsNS41LTUuNWwwLDB2LTg5QzEwMCwyLjUsOTcuNSwwLDk0LjUsMEM5NC41LDAsOTQuNSwwLDk0LjUsMHoiLz4KPC9zdmc+Cg==" alt="Share on Facebook" data-reactid="22"/></a><a class="sc-jTzLTM eTkrat" href="https://twitter.com/intent/tweet?text=The%20Timezone%20Struggle%20by%20@pav_sidhu%20https://blog.pavsidhu.com/the-timezone-struggle" target="_blank" rel="noreferrer noopener" data-reactid="23"><img class="sc-fjdhpX ideBFY" src="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjMURBMUYyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICA8cGF0aCBkPSJNMTAwIDE5YTQxIDQxIDAgMCAxLTExLjc4IDMuMjMgMjAuNiAyMC42IDAgMCAwIDktMTEuMzQgNDEuMzYgNDEuMzYgMCAwIDEtMTMgNSAyMC41MyAyMC41MyAwIDAgMC0zNSAxOC43QTU4LjI0IDU4LjI0IDAgMCAxIDcgMTMuMTRhMjAuNTQgMjAuNTQgMCAwIDAgNi4zNSAyNy4zOEEyMC41MiAyMC41MiAwIDAgMSA0IDM4di4yNmEyMC41MyAyMC41MyAwIDAgMCAxNi40OCAyMC4wNiAyMC43OCAyMC43OCAwIDAgMS01LjQxLjcyIDE5LjY5IDE5LjY5IDAgMCAxLTMuODYtLjM4IDIwLjUyIDIwLjUyIDAgMCAwIDE5LjE2IDE0LjI1IDQxLjE2IDQxLjE2IDAgMCAxLTI1LjQ4IDguNzdBNDMuNiA0My42IDAgMCAxIDAgODEuMzlhNTggNTggMCAwIDAgMzEuNDQgOS4yM2MzNy43NCAwIDU4LjM2LTMxLjI2IDU4LjM2LTU4LjM2bC0uMDctMi42NkE0MSA0MSAwIDAgMCAxMDAgMTl6Ii8+Cjwvc3ZnPg==" alt="Share on Twitter" data-reactid="24"/></a></div></div></div><footer class="sc-ifAKCX kasrTC" data-reactid="25"><div class="sc-EHOje eSSqcR" data-reactid="26"></div></footer></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-fc44ae6f09f614b02770.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","30862416422887":"component---src-templates-post-tsx-8f334c35fa5d05ad2c3f.js","178469467687848":"component---src-pages-404-tsx-5f9db4ba42f1c7ee2cf2.js","221374088121123":"component---src-pages-index-tsx-6d810ef6c7d2d7b5c11d.js","60335399758886":"path----557518bd178906f8d58a.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","130459981190359":"path---using-redux-with-react-native-169ff5781c69e50dc1a9.js","245742162621177":"path---the-timezone-struggle-b2ffdb245913314e347e.js","74319695738375":"path---my-react-native-app-setup-5a135956d5d8c7762b1f.js","94670357537178":"path---validating-forms-in-react-native-c9e2bc13d5f62f169809.js","22282588131289":"path---whats-happening-with-navigation-in-react-native-a424a3ea2f813394475e.js","163989879121854":"path---5-reasons-why-i-will-open-source-my-first-app-8c1a9a2e62a11f70ed5d.js","221228894578309":"path---how-i-built-my-blog-using-gatsby-and-netlify-0c2ac81172511b25f5f1.js","58879408881486":"path---docker-an-explanation-for-beginners-72e257d8b7bbdc018da3.js","186703154786247":"path---5-reasons-why-i-chose-react-native-over-traditional-app-development-4354e57fa0dbf1ec0882.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-f4ef256e9a6008d99144.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","22676092666560":"component---src-layouts-index-tsx-1fb4e04193a2f48d39aa.js"}/*]]>*/</script><script>
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-41576939-5', 'auto');
      }
      </script><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/commons-967e5303418f76a8ed8e.js","/app-fc44ae6f09f614b02770.js","/path---the-timezone-struggle-b2ffdb245913314e347e.js","/component---src-templates-post-tsx-8f334c35fa5d05ad2c3f.js","/component---src-layouts-index-tsx-1fb4e04193a2f48d39aa.js"])/*]]>*/</script></body></html>